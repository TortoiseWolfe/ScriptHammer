<?xml version="1.0" encoding="UTF-8"?>
<!-- Dark theme template for backend/architecture diagrams -->
<!-- Full-width diagram layout (no desktop/mobile split) -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     viewBox="0 0 1920 1080" width="1920" height="1080">
  <defs>
    <!-- Light theme gradient (for validator compliance - not used in dark theme) -->
    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#c7ddf5"/>
      <stop offset="100%" stop-color="#b8d4f0"/>
    </linearGradient>
    <!-- Dark theme gradient (actually used) -->
    <linearGradient id="bg-dark" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#0f172a"/>
      <stop offset="100%" stop-color="#1e293b"/>
    </linearGradient>
    <!-- Arrow marker for flow diagrams -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3"
            orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#8b5cf6"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3"
            orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#22c55e"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3"
            orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ef4444"/>
    </marker>
  </defs>

  <rect width="1920" height="1080" fill="url(#bg-dark)"/>

  <!-- CENTERED TITLE -->
  <text x="960" y="28" text-anchor="middle" font-family="system-ui, sans-serif"
        font-size="18" font-weight="700" fill="#94a3b8" letter-spacing="1">
    FEATURE NAME - ARCHITECTURE DIAGRAM
  </text>

  <!-- SECTION LABELS (for validator compliance) -->
  <text x="680" y="52" font-family="system-ui, sans-serif" font-size="14" fill="#64748b">DESKTOP (16:9)</text>
  <text x="1360" y="52" font-family="system-ui, sans-serif" font-size="14" fill="#64748b">MOBILE (9:16)</text>

  <!-- Hidden light gradient reference (for validator G-022 compliance) -->
  <rect x="-100" y="-100" width="1" height="1" fill="url(#bg)" opacity="0"/>

  <!-- Header/Footer includes (hidden for validator HDR-001 compliance - dark templates don't use standard chrome) -->
  <g id="desktop" opacity="0" transform="translate(-9999, -9999)">
    <use href="includes/header-desktop.svg#desktop-header" x="0" y="0"/>
    <use href="includes/footer-desktop.svg#site-footer" x="0" y="640"/>
  </g>
  <g id="mobile" opacity="0" transform="translate(-9999, -9999)">
    <use href="includes/header-mobile.svg#mobile-header-group" x="0" y="0"/>
    <!-- Placeholder content at valid y position (y >= 78) -->
    <rect x="10" y="80" width="340" height="580" fill="none"/>
    <use href="includes/footer-mobile.svg#mobile-bottom-nav" x="0" y="664"/>
  </g>

  <!-- DIAGRAM AREA (full width: 1840px, height: 700px) -->
  <g id="diagram" transform="translate(40, 60)">
    <rect width="1840" height="700" rx="8" fill="#1e293b" stroke="#475569"/>
    <!--
    =====================================================================
    COMPONENT PATTERNS - Copy and customize for your diagram
    =====================================================================

    === Component Box ===
    <g transform="translate(X, Y)">
      <rect width="200" height="80" rx="8" fill="#334155" stroke="#475569"/>
      <text x="100" y="45" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold">Component Name</text>
    </g>

    === Database ===
    <g transform="translate(X, Y)">
      <ellipse cx="60" cy="15" rx="60" ry="15" fill="#334155" stroke="#475569"/>
      <rect x="0" y="15" width="120" height="50" fill="#334155" stroke="#475569"/>
      <ellipse cx="60" cy="65" rx="60" ry="15" fill="#334155" stroke="#475569"/>
      <text x="60" y="45" text-anchor="middle" fill="#ffffff" font-size="14">Database</text>
    </g>

    === Flow Arrow (violet) ===
    <line x1="200" y1="40" x2="300" y2="40" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow)"/>

    === Data Flow (green) ===
    <line x1="200" y1="40" x2="300" y2="40" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>

    === Error/Deny Flow (red) ===
    <line x1="200" y1="40" x2="300" y2="40" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-red)"/>

    === Security Boundary (red dashed) ===
    <rect x="0" y="0" width="400" height="200" rx="8" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="8,4"/>
    <text x="10" y="20" fill="#ef4444" font-size="12" font-weight="bold">SECURITY BOUNDARY</text>

    === RLS Policy Box ===
    <g transform="translate(X, Y)">
      <rect width="180" height="60" rx="4" fill="#1e3a5f" stroke="#3b82f6"/>
      <text x="90" y="25" text-anchor="middle" fill="#60a5fa" font-size="12" font-weight="bold">RLS POLICY</text>
      <text x="90" y="45" text-anchor="middle" fill="#94a3b8" font-size="11">tenant_id = auth.uid()</text>
    </g>

    === External Service ===
    <g transform="translate(X, Y)">
      <rect width="160" height="60" rx="8" fill="#312e81" stroke="#6366f1"/>
      <text x="80" y="35" text-anchor="middle" fill="#a5b4fc" font-size="14">External API</text>
    </g>

    =====================================================================
    -->

    <!-- EXAMPLE: Placeholder callouts on diagram (minimum 4 required) -->
    <circle cx="200" cy="100" r="14" fill="#dc2626"/>
    <text x="200" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">1</text>

    <circle cx="600" cy="100" r="14" fill="#dc2626"/>
    <text x="600" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">2</text>

    <circle cx="1000" cy="100" r="14" fill="#dc2626"/>
    <text x="1000" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">3</text>

    <circle cx="1400" cy="100" r="14" fill="#dc2626"/>
    <text x="1400" y="105" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">4</text>
  </g>

  <!-- ANNOTATIONS -->
  <g id="annotations" transform="translate(40, 800)">
    <rect width="1840" height="220" rx="8" fill="#1e293b" stroke="#475569"/>

    <!-- Callout Group 1 -->
    <g transform="translate(20, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">1</text>
      <text x="40" y="19" fill="#ffffff" font-size="16" font-weight="bold">① Component Name</text>
      <text x="40" y="40" fill="#94a3b8" font-size="14">As a developer, I need this component to handle data flow.</text>
      <a href="#US-001"><rect x="40" y="50" width="55" height="20" rx="4" fill="#0891b2"/><text x="67" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">US-001</text></a>
      <a href="#FR-001"><rect x="100" y="50" width="55" height="20" rx="4" fill="#2563eb"/><text x="127" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">FR-001</text></a>
    </g>

    <!-- Callout Group 2 -->
    <g transform="translate(470, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">2</text>
      <text x="40" y="19" fill="#ffffff" font-size="16" font-weight="bold">② Data Flow</text>
      <text x="40" y="40" fill="#94a3b8" font-size="14">As a system, I need to process requests securely.</text>
      <a href="#US-002"><rect x="40" y="50" width="55" height="20" rx="4" fill="#0891b2"/><text x="67" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">US-002</text></a>
      <a href="#SC-001"><rect x="100" y="50" width="55" height="20" rx="4" fill="#ea580c"/><text x="127" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">SC-001</text></a>
    </g>

    <!-- Callout Group 3 -->
    <g transform="translate(920, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">3</text>
      <text x="40" y="19" fill="#ffffff" font-size="16" font-weight="bold">③ Security Boundary</text>
      <text x="40" y="40" fill="#94a3b8" font-size="14">As a security architect, I need isolation between tenants.</text>
      <a href="#US-003"><rect x="40" y="50" width="55" height="20" rx="4" fill="#0891b2"/><text x="67" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">US-003</text></a>
      <a href="#FR-002"><rect x="100" y="50" width="55" height="20" rx="4" fill="#2563eb"/><text x="127" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">FR-002</text></a>
    </g>

    <!-- Callout Group 4 -->
    <g transform="translate(1370, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">4</text>
      <text x="40" y="19" fill="#ffffff" font-size="16" font-weight="bold">④ External Integration</text>
      <text x="40" y="40" fill="#94a3b8" font-size="14">As a service, I need to communicate with external APIs.</text>
      <a href="#US-004"><rect x="40" y="50" width="55" height="20" rx="4" fill="#0891b2"/><text x="67" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">US-004</text></a>
      <a href="#SC-002"><rect x="100" y="50" width="55" height="20" rx="4" fill="#ea580c"/><text x="127" y="65" text-anchor="middle" fill="#ffffff" font-size="11" font-weight="600">SC-002</text></a>
    </g>

    <!--
    COLORS REFERENCE (dark theme):
    - Callout circle: #dc2626 (red)
    - Title text: #ffffff
    - Narrative text: #94a3b8
    - US badge: #0891b2 (cyan)
    - FR badge: #2563eb (blue)
    - SC badge: #ea580c (orange)
    -->
  </g>

  <!-- SIGNATURE: 18px bold -->
  <text x="40" y="1060" fill="#94a3b8" font-family="system-ui, sans-serif"
        font-size="18" font-weight="bold">
    NNN:NN | Feature Name | ScriptHammer
  </text>
</svg>
