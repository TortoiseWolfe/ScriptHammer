<svg viewBox="0 0 1920 1080" width="1920" height="1080" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#c7ddf5"/>
      <stop offset="100%" stop-color="#b8d4f0"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="url(#bg)"/>

  <!-- Title -->
  <text x="960" y="28" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="bold" fill="#1f2937">WELCOME MESSAGE - USER ONBOARDING FLOW</text>

  <!-- Section Labels -->
  <text x="40" y="52" fill="#8b5cf6" font-family="system-ui, sans-serif" font-size="18" font-weight="bold">DESKTOP (16:9)</text>
  <text x="1360" y="52" fill="#d946ef" font-family="system-ui, sans-serif" font-size="15" font-weight="bold">MOBILE</text>

  <!-- Desktop Viewport -->
  <g id="desktop" transform="translate(40, 60)">
    <!-- Desktop Header -->
    <use href="includes/header-desktop.svg#desktop-header" x="0" y="0"/>

    <!-- Active navigation state for Messages -->
    <rect x="560" y="3" width="80" height="44" rx="4" fill="#8b5cf6"/>
    <text x="600" y="31" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Messages</text>

    <!-- Main Content Area - Split View -->
    <!-- Left Panel: Conversation List -->
    <rect x="20" y="60" width="380" height="560" rx="8" fill="#e8d4b8"/>
    <text x="40" y="90" fill="#374151" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Conversations</text>

    <!-- Welcome Message Conversation (highlighted) -->
    <rect x="30" y="110" width="360" height="80" rx="6" fill="#f5f0e6" stroke="#8b5cf6" stroke-width="2"/>
    <circle cx="60" cy="150" r="20" fill="#8b5cf6"/>
    <text x="60" y="156" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">A</text>
    <text x="90" y="140" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Admin (System)</text>
    <text x="90" y="160" fill="#4b5563" font-family="system-ui, sans-serif" font-size="14">Welcome to ScriptHammer!</text>
    <text x="350" y="140" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Now</text>
    <!-- Encrypted indicator -->
    <rect x="300" y="155" width="80" height="22" rx="4" fill="#22c55e"/>
    <text x="340" y="170" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="600">E2E</text>

    <!-- Callout 1 - Welcome Conversation -->
    <g class="callout" transform="translate(395, 150)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">1</text>
    </g>

    <!-- Empty state hint -->
    <text x="200" y="240" text-anchor="middle" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-style="italic">No other conversations yet</text>

    <!-- Right Panel: Message Detail -->
    <rect x="420" y="60" width="840" height="560" rx="8" fill="#e8d4b8"/>

    <!-- Message Header -->
    <rect x="430" y="70" width="820" height="50" rx="6" fill="#dcc8a8"/>
    <circle cx="460" cy="95" r="16" fill="#8b5cf6"/>
    <text x="460" y="100" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">A</text>
    <text x="485" y="92" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Admin (System)</text>
    <text x="485" y="108" fill="#374151" font-family="system-ui, sans-serif" font-size="14">System Administrator</text>

    <!-- Welcome Message Content -->
    <rect x="430" y="130" width="700" height="200" rx="8" fill="#f5f0e6"/>
    <text x="450" y="160" fill="#374151" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Welcome to ScriptHammer!</text>
    <text x="450" y="190" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Your messages are protected with end-to-end encryption.</text>
    <text x="450" y="215" fill="#374151" font-family="system-ui, sans-serif" font-size="14">This means only you and the recipient can read them.</text>
    <text x="450" y="250" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Key features:</text>
    <text x="470" y="275" fill="#374151" font-family="system-ui, sans-serif" font-size="14">- Messages encrypted before leaving your device</text>
    <text x="470" y="300" fill="#374151" font-family="system-ui, sans-serif" font-size="14">- Only you hold the decryption keys</text>

    <!-- Callout 2 - Message Content -->
    <g class="callout" transform="translate(1140, 220)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Encryption Status Badge -->
    <rect x="430" y="340" width="220" height="36" rx="6" fill="#dcc8a8"/>
    <text x="450" y="364" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="600">End-to-End Encrypted</text>
    <rect x="610" y="348" width="30" height="20" rx="4" fill="#22c55e"/>
    <text x="625" y="363" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14">OK</text>

    <!-- Callout 3 - Encryption Status -->
    <g class="callout" transform="translate(660, 358)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">3</text>
    </g>

    <!-- Welcome Sent Status Indicator -->
    <rect x="430" y="390" width="200" height="36" rx="6" fill="#dcc8a8"/>
    <text x="450" y="414" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Welcome Status:</text>
    <rect x="575" y="398" width="45" height="20" rx="4" fill="#22c55e"/>
    <text x="597" y="413" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14">Sent</text>

    <!-- Callout 4 - Status Indicator -->
    <g class="callout" transform="translate(640, 408)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">4</text>
    </g>

    <!-- Non-blocking Indicator -->
    <rect x="430" y="450" width="400" height="50" rx="6" fill="#f5f0e6" stroke="#b8a080" stroke-width="1"/>
    <text x="450" y="480" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-style="italic">This message was sent automatically during setup.</text>

    <!-- Desktop Footer -->
    <use href="includes/footer-desktop.svg#site-footer" x="0" y="640"/>
  </g>

  <!-- Mobile Viewport -->
  <g id="mobile" transform="translate(1360, 60)">
    <!-- Mobile Phone Frame -->
    <rect x="0" y="0" width="360" height="720" rx="24" fill="#e8d4b8" stroke="#b8a080" stroke-width="2"/>

    <!-- Mobile Header -->
    <use href="includes/header-mobile.svg#mobile-header-group" x="0" y="0"/>

    <!-- Mobile Content Area -->
    <rect x="10" y="78" width="340" height="530" rx="8" fill="#f5f0e6"/>

    <!-- Conversation Header -->
    <rect x="15" y="83" width="330" height="50" rx="6" fill="#dcc8a8"/>
    <text x="30" y="115" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Back</text>
    <circle cx="130" cy="108" r="14" fill="#8b5cf6"/>
    <text x="130" y="113" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">A</text>
    <text x="155" y="113" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Admin</text>
    <rect x="275" y="98" width="60" height="22" rx="4" fill="#22c55e"/>
    <text x="305" y="113" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14">E2E</text>

    <!-- Welcome Message Bubble -->
    <rect x="20" y="145" width="280" height="180" rx="12" fill="#e8d4b8"/>
    <text x="35" y="170" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Welcome!</text>
    <text x="35" y="195" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Your messages are</text>
    <text x="35" y="215" fill="#374151" font-family="system-ui, sans-serif" font-size="14">protected with E2E</text>
    <text x="35" y="235" fill="#374151" font-family="system-ui, sans-serif" font-size="14">encryption.</text>
    <text x="35" y="265" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Only you can read</text>
    <text x="35" y="285" fill="#374151" font-family="system-ui, sans-serif" font-size="14">your messages.</text>
    <text x="250" y="315" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Now</text>

    <!-- Callout 1 - Mobile Welcome -->
    <g class="callout" transform="translate(310, 220)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">1</text>
    </g>

    <!-- Status Row -->
    <rect x="20" y="340" width="200" height="36" rx="6" fill="#dcc8a8"/>
    <text x="35" y="364" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Welcome Sent</text>
    <rect x="155" y="348" width="55" height="20" rx="4" fill="#22c55e"/>
    <text x="182" y="363" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14">OK</text>

    <!-- Callout 4 - Mobile Status -->
    <g class="callout" transform="translate(230, 358)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">4</text>
    </g>

    <!-- Error Handling Note (Success State) -->
    <rect x="20" y="390" width="320" height="50" rx="6" fill="#f5f0e6" stroke="#22c55e" stroke-width="1"/>
    <text x="35" y="415" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Account ready! Welcome delivered.</text>

    <!-- Callout 2 - Error handling success -->
    <g class="callout" transform="translate(330, 415)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Mobile Footer -->
    <use href="includes/footer-mobile.svg#mobile-bottom-nav" x="0" y="664"/>
    <!-- Active state for Messages tab (G-044 rounded corners) -->
    <rect x="90" y="664" width="90" height="56" rx="4" fill="#8b5cf6"/>
    <text x="135" y="700" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Messages</text>
  </g>

  <!-- Annotation Panel -->
  <g id="annotations" transform="translate(40, 800)">
    <rect width="1840" height="220" rx="8" fill="#e8d4b8"/>

    <!-- Group 1: US-001 New User Receives Welcome Message -->
    <g transform="translate(20, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">1</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">New User Receives Welcome Message</text>
      <text x="40" y="40" fill="#374151" font-family="system-ui, sans-serif" font-size="14">As a new user, I automatically receive a welcome message</text>
      <text x="40" y="58" fill="#374151" font-family="system-ui, sans-serif" font-size="14">from admin explaining E2E encryption.</text>
      <a href="#US-001"><rect x="40" y="68" width="55" height="22" rx="4" fill="#0891b2"/><text x="67" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">US-001</text></a>
      <a href="#FR-001"><rect x="101" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="128" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-001</text></a>
      <a href="#FR-002"><rect x="162" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="189" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-002</text></a>
      <a href="#SC-001"><rect x="223" y="68" width="55" height="22" rx="4" fill="#ea580c"/><text x="250" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-001</text></a>
    </g>

    <!-- Group 2: US-002 Idempotent Welcome Messages -->
    <g transform="translate(470, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">2</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Idempotent Welcome Messages</text>
      <text x="40" y="40" fill="#374151" font-family="system-ui, sans-serif" font-size="14">System prevents duplicate welcome messages even if</text>
      <text x="40" y="58" fill="#374151" font-family="system-ui, sans-serif" font-size="14">edge cases cause multiple processing attempts.</text>
      <a href="#US-002"><rect x="40" y="68" width="55" height="22" rx="4" fill="#0891b2"/><text x="67" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">US-002</text></a>
      <a href="#FR-005"><rect x="101" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="128" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-005</text></a>
      <a href="#FR-006"><rect x="162" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="189" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-006</text></a>
      <a href="#FR-007"><rect x="223" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="250" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-007</text></a>
      <a href="#SC-005"><rect x="284" y="68" width="55" height="22" rx="4" fill="#ea580c"/><text x="311" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-005</text></a>
    </g>

    <!-- Group 3: US-003 Graceful Error Handling -->
    <g transform="translate(920, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">3</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Graceful Error Handling</text>
      <text x="40" y="40" fill="#374151" font-family="system-ui, sans-serif" font-size="14">If welcome message fails, account creation still</text>
      <text x="40" y="58" fill="#374151" font-family="system-ui, sans-serif" font-size="14">completes successfully without errors.</text>
      <a href="#US-003"><rect x="40" y="68" width="55" height="22" rx="4" fill="#0891b2"/><text x="67" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">US-003</text></a>
      <a href="#FR-009"><rect x="101" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="128" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-009</text></a>
      <a href="#FR-010"><rect x="162" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="189" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-010</text></a>
      <a href="#FR-011"><rect x="223" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="250" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-011</text></a>
      <a href="#SC-006"><rect x="284" y="68" width="55" height="22" rx="4" fill="#ea580c"/><text x="311" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-006</text></a>
    </g>

    <!-- Group 4: Message Encryption -->
    <g transform="translate(1370, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-size="14" font-weight="bold" text-anchor="middle">4</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Message Encryption</text>
      <text x="40" y="40" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Welcome message encrypted using admin public key.</text>
      <text x="40" y="58" fill="#374151" font-family="system-ui, sans-serif" font-size="14">No admin secrets required at runtime.</text>
      <a href="#FR-003"><rect x="40" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="67" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-003</text></a>
      <a href="#FR-004"><rect x="101" y="68" width="55" height="22" rx="4" fill="#2563eb"/><text x="128" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-004</text></a>
      <a href="#SC-002"><rect x="162" y="68" width="55" height="22" rx="4" fill="#ea580c"/><text x="189" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-002</text></a>
      <a href="#SC-004"><rect x="223" y="68" width="55" height="22" rx="4" fill="#ea580c"/><text x="250" y="83" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-004</text></a>
    </g>

    <!-- Row 2: Additional FR coverage -->
    <g transform="translate(20, 110)">
      <text x="0" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Additional Requirements:</text>
      <a href="#FR-008"><rect x="180" y="3" width="55" height="22" rx="4" fill="#2563eb"/><text x="207" y="18" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-008</text></a>
      <text x="245" y="18" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Update status after delivery</text>
      <a href="#FR-012"><rect x="480" y="3" width="55" height="22" rx="4" fill="#2563eb"/><text x="507" y="18" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-012</text></a>
      <text x="545" y="18" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Automated admin setup</text>
      <a href="#FR-013"><rect x="750" y="3" width="55" height="22" rx="4" fill="#2563eb"/><text x="777" y="18" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-013</text></a>
      <text x="815" y="18" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Admin key stored securely</text>
      <a href="#FR-014"><rect x="1020" y="3" width="55" height="22" rx="4" fill="#2563eb"/><text x="1047" y="18" fill="#e8d4b8" font-size="14" text-anchor="middle">FR-014</text></a>
      <text x="1085" y="18" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Private key discarded</text>
      <a href="#SC-003"><rect x="1290" y="3" width="55" height="22" rx="4" fill="#ea580c"/><text x="1317" y="18" fill="#e8d4b8" font-size="14" text-anchor="middle">SC-003</text></a>
      <text x="1355" y="18" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Client-only deployment</text>
    </g>
  </g>

  <!-- Signature -->
  <!-- Key Concepts Row (G-047) -->
  <text x="40" y="940" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#374151">Key Concepts:</text>
  <text x="140" y="940" font-family="system-ui, sans-serif" font-size="14" fill="#374151">onboarding flow | welcome email | first-time user | admin setup</text>

  <!-- Signature -->
  <text x="40" y="1060" fill="#374151" font-family="system-ui, sans-serif" font-size="18" font-weight="bold">012:01 | Welcome Message Architecture | ScriptHammer</text>
</svg>