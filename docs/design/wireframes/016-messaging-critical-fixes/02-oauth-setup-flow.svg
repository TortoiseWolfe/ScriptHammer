<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     viewBox="0 0 1920 1080" width="1920" height="1080">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#c7ddf5"/>
      <stop offset="100%" stop-color="#b8d4f0"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1920" height="1080" fill="url(#bg)"/>

  <!-- CENTERED TITLE -->
  <text x="960" y="28" text-anchor="middle" font-family="system-ui, sans-serif"
        font-size="20" font-weight="bold" fill="#1f2937">
    MESSAGING UX - OAUTH SETUP FLOW
  </text>

  <!-- Section labels -->
  <text x="40" y="52" fill="#8b5cf6" font-family="system-ui, sans-serif"
        font-size="18" font-weight="bold">DESKTOP (16:9)</text>
  <text x="1500" y="52" fill="#d946ef" font-family="system-ui, sans-serif"
        font-size="15" font-weight="bold">MOBILE</text>

  <!-- DESKTOP (1280x720) -->
  <g id="desktop" transform="translate(40, 60)">
    <rect width="1280" height="720" rx="8" fill="#e8d4b8" stroke="#b8a080" stroke-width="2"/>
    <use href="includes/header-desktop.svg#desktop-header" x="0" y="0"/>

    <!-- Full-page setup content area -->
    <rect x="20" y="60" width="1240" height="570" rx="8" fill="#f5f0e6" stroke="#b8a080"/>

    <!-- Lock icon -->
    <g transform="translate(605, 100)">
      <circle r="30" fill="#8b5cf6"/>
      <path d="M-12,-5 L-12,10 L12,10 L12,-5 L-12,-5 M-8,-5 L-8,-12 A8,8 0 0 1 8,-12 L8,-5" fill="none" stroke="#fff" stroke-width="3"/>
    </g>

    <!-- Title -->
    <text x="640" y="165" text-anchor="middle" fill="#374151" font-family="system-ui, sans-serif" font-size="22" font-weight="700">Set Up Encrypted Messaging</text>
    <text x="640" y="195" text-anchor="middle" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Create a password to secure your private conversations</text>

    <!-- Callout 1: Full-page setup -->
    <g transform="translate(1000, 120)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">1</text>
    </g>

    <!-- Warning 1: Above password field -->
    <rect x="340" y="220" width="600" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="360" y="245" fill="#92400e" font-family="system-ui, sans-serif" font-size="14" font-weight="600">⚠️ Save this password! You cannot recover your messages without it.</text>

    <!-- Callout 2: Warning placement 1 -->
    <g transform="translate(960, 240)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Password field -->
    <text x="340" y="290" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Messaging Password</text>
    <rect x="340" y="300" width="600" height="44" rx="6" fill="#f5f0e6" stroke="#b8a080" stroke-width="1"/>
    <text x="360" y="328" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="14">Enter your messaging password</text>

    <!-- Callout 3: Password manager attributes -->
    <g transform="translate(960, 322)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">3</text>
    </g>

    <!-- Form attributes hint -->
    <rect x="340" y="350" width="360" height="24" rx="4" fill="#dbeafe" stroke="#3b82f6"/>
    <text x="350" y="367" fill="#1e40af" font-family="system-ui, sans-serif" font-size="14">autocomplete="new-password"</text>

    <!-- Confirm password field -->
    <text x="340" y="400" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Confirm Password</text>
    <rect x="340" y="410" width="600" height="44" rx="6" fill="#f5f0e6" stroke="#b8a080" stroke-width="1"/>
    <text x="360" y="438" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="14">Re-enter your messaging password</text>

    <!-- Warning 2: Below confirm field -->
    <rect x="340" y="470" width="600" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="360" y="495" fill="#92400e" font-family="system-ui, sans-serif" font-size="14" font-weight="600">⚠️ We cannot recover your password. Consider using a password manager.</text>

    <!-- Callout 2 (repeated for second warning) -->
    <g transform="translate(960, 490)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Submit button -->
    <rect x="340" y="530" width="600" height="50" rx="8" fill="#8b5cf6"/>
    <text x="640" y="562" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="16" font-weight="600">Create Encryption Keys</text>

    <!-- Callout 4: Mode detection -->
    <g transform="translate(960, 555)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">4</text>
    </g>

    <!-- Mode indicator -->
    <rect x="530" y="590" width="220" height="28" rx="4" fill="#dcfce7" stroke="#22c55e"/>
    <text x="640" y="609" text-anchor="middle" fill="#166534" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Mode: SETUP (new user)</text>

    <use href="includes/footer-desktop.svg#site-footer" x="0" y="640"/>
  </g>

  <!-- MOBILE (360x720) -->
  <g id="mobile" transform="translate(1360, 60)">
    <rect width="360" height="720" rx="24" fill="#e8d4b8" stroke="#b8a080" stroke-width="2"/>
    <use href="includes/header-mobile.svg#mobile-header-group" x="0" y="0"/>

    <!-- Mobile setup form -->
    <rect x="15" y="85" width="330" height="560" rx="8" fill="#dcc8a8" stroke="#b8a080"/>

    <!-- Mobile lock icon -->
    <g transform="translate(180, 115)">
      <circle r="22" fill="#8b5cf6"/>
      <path d="M-8,-3 L-8,8 L8,8 L8,-3 L-8,-3 M-5,-3 L-5,-8 A5,5 0 0 1 5,-8 L5,-3" fill="none" stroke="#fff" stroke-width="2"/>
    </g>

    <!-- Mobile title -->
    <text x="180" y="160" text-anchor="middle" fill="#374151" font-family="system-ui, sans-serif" font-size="16" font-weight="700">Set Up Encrypted Messaging</text>
    <text x="180" y="180" text-anchor="middle" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Create a secure password</text>

    <!-- Callout 1 mobile -->
    <g transform="translate(355, 140)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">1</text>
    </g>

    <!-- Mobile warning 1 -->
    <rect x="25" y="200" width="310" height="35" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
    <text x="35" y="222" fill="#92400e" font-family="system-ui, sans-serif" font-size="14" font-weight="600">⚠️ Save this password!</text>

    <!-- Callout 2 mobile -->
    <g transform="translate(355, 217)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Mobile password field -->
    <text x="25" y="260" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Password</text>
    <rect x="25" y="270" width="310" height="44" rx="6" fill="#f5f0e6" stroke="#b8a080"/>
    <text x="35" y="297" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="14">Enter password</text>

    <!-- Callout 3 mobile -->
    <g transform="translate(355, 292)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">3</text>
    </g>

    <!-- Mobile confirm password -->
    <text x="25" y="340" fill="#374151" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Confirm Password</text>
    <rect x="25" y="350" width="310" height="44" rx="6" fill="#f5f0e6" stroke="#b8a080"/>
    <text x="35" y="377" fill="#9ca3af" font-family="system-ui, sans-serif" font-size="14">Re-enter password</text>

    <!-- Mobile warning 2 -->
    <rect x="25" y="410" width="310" height="50" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
    <text x="35" y="432" fill="#92400e" font-family="system-ui, sans-serif" font-size="14" font-weight="600">⚠️ Cannot recover password.</text>
    <text x="35" y="450" fill="#92400e" font-family="system-ui, sans-serif" font-size="14">Use a password manager.</text>

    <!-- Callout 2 mobile (second warning) -->
    <g transform="translate(355, 435)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">2</text>
    </g>

    <!-- Mobile submit -->
    <rect x="25" y="475" width="310" height="50" rx="8" fill="#8b5cf6"/>
    <text x="180" y="505" text-anchor="middle" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Create Encryption Keys</text>

    <!-- Callout 4 mobile -->
    <g transform="translate(355, 500)">
      <circle r="14" fill="#dc2626"/>
      <text y="5" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">4</text>
    </g>

    <!-- Mobile mode indicator -->
    <rect x="95" y="540" width="170" height="24" rx="4" fill="#dcfce7" stroke="#22c55e"/>
    <text x="180" y="557" text-anchor="middle" fill="#166534" font-family="system-ui, sans-serif" font-size="14" font-weight="600">Mode: SETUP</text>

    <!-- Success state preview -->
    <rect x="25" y="580" width="310" height="50" rx="4" fill="#dcfce7" stroke="#22c55e"/>
    <text x="35" y="603" fill="#166534" font-family="system-ui, sans-serif" font-size="14" font-weight="600">✓ Setup complete!</text>
    <text x="35" y="622" fill="#166534" font-family="system-ui, sans-serif" font-size="14">⚠️ Remember your password</text>

    <use href="includes/footer-mobile.svg#mobile-bottom-nav" x="0" y="664"/>
  </g>

  <!-- ANNOTATION PANEL -->
  <g id="annotations" transform="translate(40, 800)">
    <rect width="1840" height="220" rx="8" fill="#e8d4b8" stroke="#b8a080" stroke-width="2"/>

    <!-- Column 1: Full-Page Setup -->
    <g transform="translate(20, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">1</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Full-Page Setup Flow</text>
      <text x="40" y="42" fill="#374151" font-family="system-ui, sans-serif" font-size="14">As an OAuth user with no encryption keys,</text>
      <text x="40" y="62" fill="#374151" font-family="system-ui, sans-serif" font-size="14">I see a dedicated full-page setup.</text>
      <a href="#US-002"><rect x="40" y="76" width="60" height="22" rx="4" fill="#0891b2"/><text x="70" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">US-002</text></a>
      <a href="#FR-004"><rect x="106" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="133" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-004</text></a>
      <a href="#FR-005"><rect x="167" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="194" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-005</text></a>
      <a href="#SC-002"><rect x="228" y="76" width="55" height="22" rx="4" fill="#ea580c"/><text x="255" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">SC-002</text></a>
    </g>

    <!-- Column 2: Password Warning Placements -->
    <g transform="translate(470, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">2</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Password Warning Points</text>
      <text x="40" y="42" fill="#374151" font-family="system-ui, sans-serif" font-size="14">"Save this password" warning shown at</text>
      <text x="40" y="62" fill="#374151" font-family="system-ui, sans-serif" font-size="14">three points: above, below, and success.</text>
      <a href="#US-002"><rect x="40" y="76" width="60" height="22" rx="4" fill="#0891b2"/><text x="70" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">US-002</text></a>
      <a href="#FR-010"><rect x="106" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="133" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-010</text></a>
      <a href="#SC-006"><rect x="167" y="76" width="55" height="22" rx="4" fill="#ea580c"/><text x="194" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">SC-006</text></a>
    </g>

    <!-- Column 3: Password Manager Integration -->
    <g transform="translate(920, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">3</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Password Manager Integration</text>
      <text x="40" y="42" fill="#374151" font-family="system-ui, sans-serif" font-size="14">Form includes proper attributes so</text>
      <text x="40" y="62" fill="#374151" font-family="system-ui, sans-serif" font-size="14">password managers can save credentials.</text>
      <a href="#US-003"><rect x="40" y="76" width="60" height="22" rx="4" fill="#0891b2"/><text x="70" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">US-003</text></a>
      <a href="#FR-009"><rect x="106" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="133" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-009</text></a>
      <a href="#FR-011"><rect x="167" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="194" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-011</text></a>
      <a href="#SC-003"><rect x="228" y="76" width="55" height="22" rx="4" fill="#ea580c"/><text x="255" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">SC-003</text></a>
    </g>

    <!-- Column 4: Post-Setup Access -->
    <g transform="translate(1370, 20)">
      <circle cx="14" cy="14" r="14" fill="#dc2626"/>
      <text x="14" y="19" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">4</text>
      <text x="40" y="18" fill="#1f2937" font-family="system-ui, sans-serif" font-size="16" font-weight="bold">Post-Setup Access</text>
      <text x="40" y="42" fill="#374151" font-family="system-ui, sans-serif" font-size="14">After setup, user can send/receive</text>
      <text x="40" y="62" fill="#374151" font-family="system-ui, sans-serif" font-size="14">encrypted messages immediately.</text>
      <a href="#US-001"><rect x="40" y="76" width="60" height="22" rx="4" fill="#0891b2"/><text x="70" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">US-001</text></a>
      <a href="#FR-007"><rect x="106" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="133" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-007</text></a>
      <a href="#FR-008"><rect x="167" y="76" width="55" height="22" rx="4" fill="#2563eb"/><text x="194" y="91" fill="#e8d4b8" font-family="system-ui, sans-serif" font-size="14" text-anchor="middle">FR-008</text></a>
    </g>
  </g>

  <!-- Signature -->
  <!-- Key Concepts Row (G-047) -->

  <text x="40" y="940" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#374151">Key Concepts:</text>
  <text x="140" y="940" font-family="system-ui, sans-serif" font-size="14" fill="#374151">message input | conversation view | error states | OAuth setup</text>
  <text x="40" y="1060" font-family="system-ui, sans-serif" font-size="18" font-weight="bold" fill="#374151">016:02 | Messaging Critical Fixes | ScriptHammer</text>
</svg>
